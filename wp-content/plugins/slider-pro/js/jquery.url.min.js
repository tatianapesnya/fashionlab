(function(g,e){function j(c,d){var a=decodeURI(c);a=k[d?"strict":"loose"].exec(a);for(var b={attr:{},param:{},seg:{}},h=14;h--;)b.attr[l[h]]=a[h]||"";b.param.query={};b.param.fragment={};b.attr.query.replace(m,function(n,f,i){if(f)b.param.query[f]=i});b.attr.fragment.replace(o,function(n,f,i){if(f)b.param.fragment[f]=i});b.seg.path=b.attr.path.replace(/^\/+|\/+$/g,"").split("/");b.seg.fragment=b.attr.fragment.replace(/^\/+|\/+$/g,"").split("/");b.attr.base=b.attr.host?b.attr.protocol+"://"+b.attr.host+
(b.attr.port?":"+b.attr.port:""):"";return b}function p(c){c=c.tagName;if(c!==e)return q[c.toLowerCase()];return c}var q={a:"href",img:"src",form:"action",base:"href",script:"src",iframe:"src",link:"href"},l=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","fragment"],r={anchor:"fragment"},k={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,
loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},m=/(?:^|&|;)([^&=;]*)=?([^&;]*)/g,o=/(?:^|&|;)([^&=;]*)=?([^&;]*)/g;g.fn.url=function(c){var d="";if(this.length)d=g(this).attr(p(this[0]))||"";return g.url(d,c)};g.url=function(c,d){if(arguments.length===1&&c===true){d=true;c=e}d=d||false;c=c||window.location.toString();return{data:j(c,d),attr:function(a){a=
r[a]||a;return a!==e?this.data.attr[a]:this.data.attr},param:function(a){return a!==e?this.data.param.query[a]:this.data.param.query},fparam:function(a){return a!==e?this.data.param.fragment[a]:this.data.param.fragment},segment:function(a){if(a===e)return this.data.seg.path;else{a=a<0?this.data.seg.path.length+a:a-1;return this.data.seg.path[a]}},fsegment:function(a){if(a===e)return this.data.seg.fragment;else{a=a<0?this.data.seg.fragment.length+a:a-1;return this.data.seg.fragment[a]}}}}})(jQuery);

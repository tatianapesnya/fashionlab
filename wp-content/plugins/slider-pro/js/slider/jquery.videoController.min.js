(function(i){function v(p,n){function j(){if(w)q();else{var h=document.createElement("script");h.src="http://www.youtube.com/player_api";var k=document.getElementsByTagName("script")[0];k.parentNode.insertBefore(h,k);window.onYouTubePlayerAPIReady=function(){q()}}}function q(){a=new YT.Player(l[0],{events:{onReady:function(){o=true;if(e.settings.reachVideoAction=="playVideo"&&!g){g=true;m()}},onStateChange:function(h){switch(h.data){case YT.PlayerState.BUFFERING:if(!f){f=true;c("start")}break;case YT.PlayerState.PLAYING:if(!f){f=
true;c("start")}if(!d){d=true;c("play")}break;case YT.PlayerState.PAUSED:if(d){d=false;c("pause")}break;case YT.PlayerState.ENDED:d=false;c("end")}}}})}function x(){a=Froogaloop(l[0]);a.addEvent("ready",function(){o=true;if(e.settings.reachVideoAction=="playVideo"&&!g){g=true;m()}a.addEvent("loadProgress",function(){if(!f){f=true;c("start")}});a.addEvent("play",function(){if(!f){f=true;c("start")}if(!d){d=true;c("play")}});a.addEvent("pause",function(){if(d){d=false;c("pause")}});a.addEvent("finish",
function(){d=false;c("end")})})}function y(){VideoJS(l.attr("id")).ready(function(){a=this;o=true;if(e.settings.reachVideoAction=="playVideo"&&!g){g=true;m()}a.addEvent("play",function(){if(!f){f=true;c("start")}if(!d){d=true;c("play")}});a.addEvent("pause",function(){if(d){d=false;c("pause")}});a.addEvent("ended",function(){d=false;c("end")});a.addEvent("enterFullWindow",function(){c("fullscreenchange")});a.addEvent("exitFullWindow",function(){c("fullscreenchange")})})}function z(){if(A)r();else var h=
setInterval(function(){if(sublimevideo.prepare){clearInterval(h);r()}},100)}function r(){if(e.settings.reachVideoAction=="playVideo"&&!g){g=true;m()}sublimevideo.onStart(function(){c("start");c("play")});sublimevideo.onEnd(function(){c("end")})}function B(){a=l[0];o=true;if(e.settings.reachVideoAction=="playVideo"&&!g){g=true;m()}a.addEventListener("play",function(){if(!f){f=true;c("start")}if(!d){d=true;c("play")}});a.addEventListener("pause",function(){if(d){d=false;c("pause")}});a.addEventListener("ended",
function(){d=false;c("end")})}function C(){var h=l.find("object").length?l.find("object").attr("id"):l.attr("id");a=jwplayer(h);o=true;if(e.settings.reachVideoAction=="playVideo"&&!g){g=true;m()}a.onPlay(function(){if(!f){f=true;c("start")}if(!d){d=true;c("play")}});a.onBuffer(function(){if(!f){f=true;c("start")}});a.onPause(function(){if(d){d=false;c("pause")}});a.onComplete(function(){d=false;c("end")})}function m(){if(b=="youtube-video")a.playVideo();else if(b=="vimeo-video")a.api("play");else if(b==
"html5-video-js")a.play();else if(b=="html5-sublime-video")sublimevideo.play();else if(b=="html5-video")a.play();else b=="jw-player-video"&&a.play(true)}function s(){if(b=="youtube-video"){a.seekTo(1);a.stopVideo()}else if(b=="vimeo-video"){a.api("pause");a.api("unload")}else if(b=="html5-video-js"){a.currentTime(0);a.pause()}else if(b=="html5-sublime-video")sublimevideo.stop();else if(b=="html5-video"){a.currentTime=0;a.pause()}else if(b=="jw-player-video"){a.seek(0);a.pause(true)}}function t(){if(b==
"youtube-video")a.pauseVideo();else if(b=="vimeo-video")a.api("pause");else if(b=="html5-video-js")a.pause();else if(b=="html5-sublime-video")sublimevideo.stop();else if(b=="html5-video")a.pause();else b=="jw-player-video"&&a.pause(true)}function u(){if(b=="youtube-video")a.stopVideo();else if(b=="vimeo-video")a.api("pause");else if(b=="html5-video-js")a.pause();else if(b=="html5-sublime-video")sublimevideo.stop();else if(b=="html5-video")a.pause();else b=="jw-player-video"&&a.pause(true)}function c(h){var k=
{type:h};switch(h){case "start":i.isFunction(e.settings.start)&&e.settings.start.call(this,k);break;case "play":i.isFunction(e.settings.play)&&e.settings.play.call(this,k);break;case "pause":i.isFunction(e.settings.pause)&&e.settings.pause.call(this,k);break;case "end":i.isFunction(e.settings.end)&&e.settings.end.call(this,k);break;case "fullscreenchange":i.isFunction(e.settings.fullscreenchange)&&e.settings.fullscreenchange.call(this,k)}}this.settings=i.extend({},i.fn.videoController.defaults,n);
var l=i(p),e=this,b,a,w=window.YT&&window.YT.Player,A=window.sublimevideo&&window.sublimevideo.prepare,o=false,g=false,f=false,d=false;b=e.settings.videoType;switch(b){case "youtube-video":j();break;case "vimeo-video":x();break;case "html5-video-js":y();break;case "html5-sublime-video":z();break;case "html5-video":B();break;case "jw-player-video":C()}this.reachVideo=function(){if(e.settings.reachVideoAction=="playVideo"&&o&&!g){g=true;m()}};this.leaveVideo=function(){g=false;if(f&&a||b=="html5-sublime-video")if(e.settings.leaveVideoAction==
"stopVideo"||e.settings.leaveVideoAction=="removeVideo")s();else if(e.settings.leaveVideoAction=="pauseVideoAndBuffering")u();else e.settings.leaveVideoAction=="pauseVideo"&&t()};this.stopVideo=s;this.pauseVideo=t;this.replayVideo=function(){if(b=="youtube-video"){a.seekTo(1);a.playVideo()}else if(b=="vimeo-video")a.api("play");else if(b=="html5-video-js"){a.currentTime(0);a.play()}else if(b=="html5-sublime-video")sublimevideo.play();else if(b=="html5-video"){a.currentTime=0;a.play()}else if(b=="jw-player-video"){a.seek(0);
a.play(true)}};this.pauseVideoAndBuffering=u}i.fn.videoController=function(p){for(var n=[],j=0;j<this.length;j++){if(!this[j].videoControllerInstance)this[j].videoControllerInstance=new v(this[j],p);n.push(this[j].videoControllerInstance)}return n.length>1?n:n[0]};i.fn.videoController.defaults={start:null,play:null,pause:null,end:null,videoType:null,fullscreenchange:null,reachVideoAction:"none",leaveVideoAction:"pauseVideo"}})(jQuery);
